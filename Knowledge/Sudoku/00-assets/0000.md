```tikz
\begin{document}
\tikzset{
    gridline/.style={thin, gray!50},
    blockline/.style={very thick, black},
    digit/.style={font=\bfseries\large},
    hint/.style={font=\scriptsize, black!70}
}

% === 绘制9x9格线 ===
\newcommand{\drawsudokugrid}{
    \foreach \i in {0,...,9} {
        \draw[gridline] (0,\i) -- (9,\i);
        \draw[gridline] (\i,0) -- (\i,9);
    }
    \foreach \i in {0,3,6,9} {
        \draw[blockline] (0,\i) -- (9,\i);
        \draw[blockline] (\i,0) -- (\i,9);
    }
}

% === 绘制主数字 ===
\newcommand{\putdigit}[3]{%
    % #1=row, #2=col, #3=value
    \def\val{#3}
    \ifx\val\empty\else
        \pgfmathsetmacro{\x}{#2-0.5}
        \pgfmathsetmacro{\y}{9.5-#1}
        \node[digit] at (\x,\y) {\val};
    \fi
}

% === 绘制候选数字 ===
\newcommand{\puthint}[3]{%
    % #1=row, #2=col, #3=string of digits
    \def\val{#3}
    \ifx\val\empty\else
        \pgfmathsetmacro{\x}{#2-0.5}
        \pgfmathsetmacro{\y}{9.5-#1}
        \foreach \n in {1,...,9} {
            \pgfmathtruncatemacro{\xx}{mod(\n-1,3)}
            \pgfmathtruncatemacro{\yy}{2-floor((\n-1)/3)}
            \foreach \m in \val {
                \ifnum\n=\m
                    \node[hint] at (\x-0.3+0.3*\xx,\y-0.3+0.3*\yy) {\m};
                \fi
            }
        }
    \fi
}

% === 每行输入：主数字 ===
\newcommand{\setrowdigits}[9]{%
    \foreach \v [count=\i from 1] in {#1,#2,#3,#4,#5,#6,#7,#8,#9} {
        \putdigit{\the\rownum}{\i}{\v}
    }
    \advance\rownum by 1
}

% === 每行输入：候选数字 ===
\newcommand{\setrowhints}[9]{%
    \foreach \v [count=\i from 1] in {#1,#2,#3,#4,#5,#6,#7,#8,#9} {
        \puthint{\the\rownum}{\i}{\v}
    }
    \advance\rownum by 1
}

\begin{tikzpicture}[scale=0.8]
    \drawsudokugrid

    % =====================
    % 第一层：确定数字
    % =====================
    \newcount\rownum
    \rownum=1
    \setrowdigits { }{ }{9}{ }{ }{ }{2}{6}{ } 
    \setrowdigits {2}{ }{ }{ }{8}{4}{ }{ }{ } 
    \setrowdigits {5}{ }{ }{2}{ }{ }{ }{ }{1} 

    \setrowdigits { }{6}{ }{1}{ }{9}{7}{ }{ } 
    \setrowdigits { }{9}{ }{ }{7}{ }{ }{4}{ } 
    \setrowdigits { }{ }{7}{4}{ }{3}{ }{9}{ } 

    \setrowdigits {3}{ }{ }{ }{ }{6}{ }{ }{5} 
    \setrowdigits { }{ }{ }{5}{3}{ }{ }{ }{8} 
    \setrowdigits { }{2}{5}{ }{ }{ }{3}{ }{ }

    % =====================
    % 第二层：候选数字（草稿）
    % =====================
    \rownum=1
    \setrowhints { }{ }{ }{12345}{ }{ }{ }{ }{ } 
    \setrowhints { }{ }{ }{ }{ }{ }{1239}{567}{ } 
    \setrowhints { }{ }{ }{ }{34567}{ }{ }{78}{ } 

    \setrowhints { }{ }{ }{ }{2}{ }{ }{ }{ } 
    \setrowhints {123}{ }{ }{ }{ }{ }{58}{ }{67} 
    \setrowhints { }{ }{ }{ }{2}{ }{ }{ }{ } 

    \setrowhints { }{ }{ }{14}{ }{ }{ }{ }{ } 
    \setrowhints { }{5}{6}{ }{ }{ }{ }{ }{ } 
    \setrowhints { }{ }{ }{ }{ }{ }{ }{ }{ } 
\end{tikzpicture}
\end{document}
