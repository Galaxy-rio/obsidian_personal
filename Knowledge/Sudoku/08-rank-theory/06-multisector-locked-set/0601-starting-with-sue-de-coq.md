---
description: Starting with Sue de Coq
反向链接: "[[../rank-theory|rank-theory]]"
---

# 从融合待定数组谈起

为了衔接后面的内容，我们不妨从前面一个提及过的技巧开始切入和推广。

## 三维融合待定数组（3D Sue de Coq） <a href="#three-dimensional-sue-de-coq" id="three-dimensional-sue-de-coq"></a>

<figure><img src="../../.gitbook/assets/images_0628.png" alt="" width="375"><figcaption><p>三维融合待定数组</p></figcaption></figure>

如图所示。如果我告诉你这是一个融合待定数组，你会相信吗？

其实推理方式是一样的，不过融合待定数组里我们只用一个宫和一个行或一个列（宫 and (行 or 列)），由两个区域构成。这个例子把结构推广到了行、列、宫全部使用的情况。

我们数一下单元格的总数量：6 个；而使用的数字种类数也是 6 个。看起来这似乎快要符合跨区数组的特征了。不过之前说过，跨区数组还需要满足一点，就是所有数字都最多只能填一个，否则就会像是伪数组那样，你无法判断最终填入的数字的情况。

不过好在，这个结构所有的数字全都不会跨区，这意味着每一个数就是只能最多填一个的。那既然数字种类数和单元格数相同，又没有数字出现两次及以上，那最朴素的情况自然就是每一个单元格安排一个不同的数字刚好占满全部 6 个单元格。所以，所有数字均可用于删数。因此这个题的结论就是 `r1c8 <> 45, r6c8 <> 479, r6c9 <> 79` 了。

我们把这种从融合待定数组推广而来，还使用三个不同区域类型的结构称为**三维融合待定数组**（3D Sue de Coq），即三个维度都使用的融合待定数组。

我们再来看一个例子。

<figure><img src="../../.gitbook/assets/images_0629.png" alt="" width="375"><figcaption><p>三维融合待定数组，另一个例子</p></figcaption></figure>

如图所示。这个例子就自己看了。这个例子只是单纯少了点数，看起来不那么正常，但理解上没啥区别。

## 分段融合待定数组（Segmented Sue de Coq） <a href="#segmented-sue-de-coq" id="segmented-sue-de-coq"></a>

下面我们来看另一种推广形式。

### 3 段融合待定数组 <a href="#three-segment-sue-de-coq" id="three-segment-sue-de-coq"></a>

<figure><img src="../../.gitbook/assets/images_0630.png" alt="" width="375"><figcaption><p>3 段融合待定数组</p></figcaption></figure>

如图所示。这个例子如果按原本融合待定数组的看法的话，可能会造成困难，因为这个题目里数字 6 在 `c5` 和 `r5` 上都出现。如果去枚举 6 的填数规则，可能会造成复杂的理解过程。这次我们干脆改个思路将其当成一节一节的火车车厢去理解。

我们起步从 `r5c468(68)` 开始推理。我们发现 `r5c8` 只有 6 和 8，那么剩下的 `r5c46` 两个格子显然不能都是 6 和 8（否则三个格子全都是 6 和 8 了，这必然是矛盾的），所以必须会有 4 和 5 的出现。

那么，`r5c46` 能都是 4 和 5 吗？不能。不过我们得依赖下一节车厢——`r467c5` 才知道。显然，如果 `r5c46` 如果都是 4 和 5，则这里形成了数对，那么 `r46c5` 就不能填 4 和 5 了，这便只会剩下 6 和 7。但是，这样的话，`r467c5` 又只剩下两个数 6 和 7 了，这也不行。

总之就是，蓝色数字 4 和 5 的分布较为特殊，它在 `b5` 里出现；但它关联了两节不同的车厢，所以可以讨论出一些结论来，比如我们现在已经知道了 `r5c46` 里肯定是只能有一个单元格填的是 4 或 5 的。这一点很重要，因为它会影响到两个车厢的数字的分配情况。

很显然，起头的车厢（即 `r5c468`）显然会取两个单元格构成关于 6 和 8 的数对，那么余下一个单元格会填 4 或 5。接着看下一个车厢（即 `r467c5`），因为它也和第一节车厢完全一样，所以分配 6 和 7 也肯定只能是让 `r46c5` 两个单元格里出一个位置填 6 和 7。那么剩下的一个单元格只能是 4 或 5。

那么，这样整体看的话，就是这样的：`r5c468` 里选两个单元格构成 6 和 8 的显性数对、`r5c46` 里选一个单元格和 `r46c5` 里选一个单元格构成 4 和 5 的显性数对、`r467c5` 里选两个单元格构成 6 和 7 的显性数对。于是，这个结构的结论就很清晰了：`r3c5 <> 6, r46c46 <> 4, r6c4 <> 5, r5c2 <> 68`。

我们把这种分车厢推理的结构称为**分段融合待定数组**（Segmented Sue de Coq）或**多米诺链**（Domino Chain）。前者强调的是车厢的逻辑一节一节的，后者则将这个结构看成是多米诺骨牌一样的排列效果。

可能你会觉得这玩意儿怎么就跟融合待定数组挂上钩了，其实我们通过分析之后会发现，选取并形成显性数对的结构之后，6 的出现位置虽然有两个完全不同的区域（一个行一个列），但编排的时候已经被我们拆开看了，所以它俩本身也互相不冲突。你甚至可以从道理上将这俩 6 当成是两个不同的数字，于是这个结构就是一个 6 个单元格、6 种不同数字的跨区数组结构，这样去理解的话，是不是就像融合待定数组了？

顺带一提。分段融合待定数组的段数看的是车厢的节数。比如这个题由 3 段构成，所以也可以叫它“3 段融合待定数组”。

### 4 段融合待定数组 <a href="#four-segment-sue-de-coq" id="four-segment-sue-de-coq"></a>

下面我们再来看一个例子。

<figure><img src="../../.gitbook/assets/images_0631.png" alt="" width="375"><figcaption><p>4 段融合待定数组</p></figcaption></figure>

如图所示。这个例子会稍微麻烦一些。

我们这次不妨从 `c7` 开始看。我们选取了 `r2457c7` 这些单元格。其中有两个单元格仅有 4、8、9 三种数。那么我们显然知道它还需要有一个单元格填 4、8、9 就能形成三数组了。显然，`r45c7` 里只能选一个单元格填 4、8、9。那么，这两个单元格能都是 2 和 5 吗？这次看起来好像可以，但是实际上也不行。因为这次需要依赖后面所有的车厢，而非一节车厢就看得出来——因为当 `r45c7` 都是 2 和 5 之后，它俩形成数对，于是 `r6c89` 只能是 6 和 8，于是形成 6 和 8 的数对后 `r6c23` 又不能是 6 和 8，然后再看最后一节车厢 `r45c1`、`r5c3` 和 `r6c23` 就会发现五个单元格是不能只填 2、4、5、7 四种数的，所以就矛盾了。

那么，`r45c7` 里只能选一个单元格是 2 和 5。那么，下一节车厢则是 `r6c2389` 这四个单元格。这四个单元格里看的是 6 和 8 这两种数字。很明显，`r6c89` 里还有 2 和 5 的出现，所以我们还需要继续看这俩的情况。`r6c89` 里如果都是 6 和 8 的话，前面已经讨论过（会造成最后一节车厢矛盾），所以直接跳过；如果都是 2 和 5 的话，又会因为它和前一节车厢下的结论（`r45c7` 里有一个单元格是 2 或 5）冲突。所以此时 `r6c89` 也只能选一个单元格填 2 和 5。

那么，`r6c89` 里选了一个单元格是 2 或 5，另外一个单元格是 6 和 8，那么下一节车厢还余下两个单元格 `r6c23` 需要讨论。显然，这两个单元格讨论的方式也是一样的：你不能让这俩都是 6 和 8（否则和这节车厢里前面两个单元格 `r6c89` 里出一个单元格是 6 和 8 矛盾），你也不能让这俩都是 2、4、5（否则也是之前的结论，即会造成最后一节车厢矛盾）。所以这两个单元格也会出一个单元格填 6 和 8，另外一个则只能是 2、4、5。

最后，因为 `r6c23` 里只能有一个是 2、4、5，所以恰好和最后一节车厢里的余下三个单元格 `r4c1` 和 `r5c13` 构成 2、4、5、7 的显性四数组结构。所以，整个结构的唯一成立的情况是：先让 `r2457c7` 里其中三个单元格是 4、8、9 的显性三数组，然后 `r45c7` 里其中一个单元格和 `r6c89` 里其中一个单元格构成 2 和 5 的显性数对，接着 `r6c89` 里剩下那个单元格和 `r6c23` 里其中一个单元格构成 6 和 8 的显性数对，最后 `r6c23` 里剩下的那个单元格会和 `r4c1` 和 `r5c13` 构成关于 2、4、5、7 的显性四数组。因此，这个题的结论就是 `r4c2 <> 27, r4c8 <> 2, r5c9 <> 5, r6c45 <> 6, r9c7 <> 8` 了。

这个结构用到了 4 节车厢，所以可以称为 4 段融合待定数组。

### 6 段融合待定数组 <a href="#six-segment-sue-de-coq" id="six-segment-sue-de-coq"></a>

最后我们来看一个 6 段融合待定数组。相信你已经充分地掌握了推理过程，下面就希望你自己看这个例子了。

<figure><img src="../../.gitbook/assets/images_0632.png" alt="" width="375"><figcaption><p>6 段融合待定数组</p></figcaption></figure>

如图所示。

## 多米诺环（Domino Loop） <a href="#domino-loop" id="domino-loop"></a>

有没有想过，如果我们把前文分段融合待定数组的头尾闭合起来，会是怎么样的一种情况？

<figure><img src="../../.gitbook/assets/images_0633.png" alt="" width="375"><figcaption><p>多米诺环</p></figcaption></figure>

如图所示。这个结构将前文分段融合待定数组给闭合起来了。别的一点没变。

既然是闭合了，所以你随意找一个位置起头即可。推理过程就略了，因为是一样的。

这个技巧被称为**多米诺环**（Domino Loop），由一位叫 Steve Kurzhal 的玩家独立发现和发布技巧推理，所以为了纪念他，这个技巧也被称为 **Kurzhal 环**（Steve Kurzhal's Loop），简称 **SK 环**，即他本人名字的首字母缩写。

虽然从分段融合待定数组里可以看出，结构不是定长的，但在多米诺环里，我们固定使用 16 个单元格，所以结构相对稳定。

我们再来看一个例子。

<figure><img src="../../.gitbook/assets/images_0634.png" alt="" width="375"><figcaption><p>多米诺环，另一个例子</p></figcaption></figure>

如图所示。

下面给各位练手找一找这个结构。

<figure><img src="../../.gitbook/assets/images_0635.png" alt="" width="375"><figcaption><p>多米诺环，自己找</p></figcaption></figure>

如图所示。这个题里藏了一个多米诺环，请把它找出来。
